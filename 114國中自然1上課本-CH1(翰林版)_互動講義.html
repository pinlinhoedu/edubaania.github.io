<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第一章 生命的奇蹟與科學家的偵探筆記</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script" async></script>
    <style>
        :root {
            --bg-color: #f4f3ef;
            --card-bg: #ffffff;
            --text-color: #4a4a4a;
            --heading-color: #333;
            --accent-color-1: #a0c4d2; /* Dusty Blue */
            --accent-color-2: #bcc4b3; /* Sage Green */
            --accent-color-3: #dcd3c7; /* Oatmeal */
            --accent-color-4: #e4c9c9; /* Muted Pink */
            --highlight-color: #7e9c96; /* Dusty Teal */
            --correct-color: #8fb996;
            --incorrect-color: #d9a6a4;
            --font-family: Arial, Helvetica, 'PingFang TC', 'Microsoft JhengHei', sans-serif;
            --border-radius: 12px;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        h1, h2, h3 {
            color: var(--heading-color);
            line-height: 1.4;
            font-weight: 600;
        }

        h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 1rem;
            color: var(--highlight-color);
        }

        h2 {
            font-size: 2rem;
            border-bottom: 3px solid var(--accent-color-1);
            padding-bottom: 0.5rem;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
        }

        h3 {
            font-size: 1.5rem;
            color: var(--highlight-color);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        blockquote {
            background-color: #f9f9f9;
            border-left: 5px solid var(--accent-color-2);
            margin: 1.5em 0;
            padding: 1em 1.5em;
            font-style: italic;
        }

        .highlight {
            color: var(--highlight-color);
            font-weight: bold;
        }

        .interactive-section {
            border: 2px dashed var(--accent-color-3);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .interactive-title {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--highlight-color);
            margin-bottom: 1rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--card-bg);
            margin: auto;
            padding: 30px;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 500px;
            text-align: center;
            animation: fadeIn 0.5s;
        }
        
        .modal-close {
            display: block;
            margin: 1rem auto 0;
            padding: 0.5rem 1.5rem;
            border: none;
            background-color: var(--accent-color-1);
            color: white;
            border-radius: 8px;
            cursor: pointer;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Opener Buttons */
        .opener-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .opener-btn {
            background-color: var(--card-bg);
            border: 2px solid var(--accent-color-3);
            padding: 15px 30px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            font-size: 1.1rem;
        }

        .opener-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Flip Cards */
        .flip-card-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 1rem;
        }

        .flip-card-container {
            background-color: transparent;
            width: 100%;
            height: 250px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-flipper {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .flip-card-container.is-flipped .flip-card-flipper {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: var(--border-radius);
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: var(--shadow);
        }

        .flip-card-front {
            color: white;
        }

        .flip-card-back {
            background-color: white;
            color: var(--text-color);
            transform: rotateY(180deg);
            font-size: 0.9rem;
        }
        
        .card-back-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .card-icon {
            margin-bottom: 10px;
            height: 40px;
            width: 40px;
            position: relative;
        }

        /* CSS Icons */
        #icon-metabolism .arrow {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 3px solid white;
            border-radius: 50%;
        }
        #icon-metabolism .arrow:nth-child(1) { top: 0; left: 0; border-right-color: transparent; transform: rotate(45deg); }
        #icon-metabolism .arrow:nth-child(2) { bottom: 0; right: 0; border-left-color: transparent; transform: rotate(45deg); }

        #icon-growth { display: flex; align-items: flex-end; gap: 4px;}
        #icon-growth div { background: white; width: 10px; }
        #icon-growth div:nth-child(1) { height: 15px; }
        #icon-growth div:nth-child(2) { height: 25px; }
        #icon-growth div:nth-child(3) { height: 35px; }

        #icon-response .center { width: 10px; height: 10px; background: white; border-radius: 50%; position: absolute; top: 15px; left: 15px; }
        #icon-response .line { width: 3px; height: 10px; background: white; position: absolute; top: 15px; left: 18.5px; transform-origin: 50% 0%; }
        #icon-response .line:nth-child(2) { transform: rotate(45deg); }
        #icon-response .line:nth-child(3) { transform: rotate(90deg); }
        #icon-response .line:nth-child(4) { transform: rotate(135deg); }
        #icon-response .line:nth-child(5) { transform: rotate(180deg); }
        #icon-response .line:nth-child(6) { transform: rotate(225deg); }
        #icon-response .line:nth-child(7) { transform: rotate(270deg); }
        #icon-response .line:nth-child(8) { transform: rotate(315deg); }

        #icon-reproduction { display: flex; align-items: center; gap: 5px; }
        #icon-reproduction div:nth-child(1) { width: 25px; height: 25px; background: white; border-radius: 50%; }
        #icon-reproduction div:nth-child(2) { width: 15px; height: 15px; background: white; border-radius: 50%; }


        /* Drag and Drop Game */
        .drag-drop-game {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .drag-sources, .drop-targets {
            padding: 15px;
            border-radius: var(--border-radius);
            background-color: #f7f7f7;
        }
        .drag-item {
            background-color: white;
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: grab;
            border: 1px solid #ddd;
            transition: background-color 0.3s;
        }
        .drag-item.dragging {
            opacity: 0.5;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .drop-target {
            background-color: #f0f0f0;
            border: 2px dashed #ccc;
            border-radius: 8px;
            min-height: 50px;
            margin-bottom: 10px;
            padding: 10px;
        }
        .drop-target.drag-over {
            border-color: var(--highlight-color);
            background-color: #eaf2f1;
        }
        .drop-target h4 {
            margin: 0 0 10px 0;
            pointer-events: none;
        }
        .drop-target .drag-item {
            cursor: default;
            border-color: var(--correct-color);
            background-color: #e8f5e9;
        }
        .feedback {
            margin-top: 15px;
            text-align: center;
        }
        .check-btn {
            background-color: var(--accent-color-1);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
        }
        .shake {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Biosphere */
        .biosphere-container {
            position: relative;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #2c3e50;
            border-radius: var(--border-radius);
            overflow: hidden;
        }
        .earth {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle at 30% 30%, #81d4fa, #0288d1 60%, #01579b);
            border-radius: 50%;
            animation: spin 30s linear infinite;
        }
        .biosphere-ring {
            position: absolute;
            width: 220px;
            height: 220px;
            border-radius: 50%;
            border: 2px solid #4caf50;
            box-shadow: 0 0 15px #4caf50, 0 0 25px #4caf50 inset;
            animation: pulse 3s infinite ease-in-out;
        }
        .biosphere-info {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            color: var(--text-color);
            padding: 10px 15px;
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
            font-size: 0.9em;
            text-align: center;
        }
        .biosphere-ring:hover + .biosphere-info {
            opacity: 1;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 15px #4caf50, 0 0 25px #4caf50 inset; }
            50% { transform: scale(1.02); box-shadow: 0 0 25px #4caf50, 0 0 35px #4caf50 inset; }
            100% { transform: scale(1); box-shadow: 0 0 15px #4caf50, 0 0 25px #4caf50 inset; }
        }
        
        /* Camouflage Game */
        .camouflage-game {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        .camouflage-box {
            width: 200px;
            height: 200px;
            display: grid;
            padding: 5px;
            border-radius: var(--border-radius);
        }
        .camouflage-box div {
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .camouflage-box div:hover {
            transform: scale(1.2);
            box-shadow: 0 0 10px white;
            z-index: 10;
        }
        #tree-frog-game {
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            background-color: #8fb98f;
        }
        #stick-bug-game {
             background-color: #d2b48c;
             position: relative;
        }
        .stick {
            position: absolute;
            height: 5px;
            background-color: #8b5a2b;
        }
        
        /* Scientific Method Accordion */
        .timeline {
            position: relative;
            padding-left: 30px;
            border-left: 2px solid var(--accent-color-3);
        }
        .timeline-item {
            margin-bottom: 20px;
        }
        .timeline-dot {
            position: absolute;
            left: -11px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 4px solid var(--accent-color-1);
            transition: background-color 0.3s;
        }
        .timeline-item.is-active .timeline-dot {
            background-color: var(--accent-color-1);
        }
        .timeline-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
            padding: 0 1rem;
        }
        .timeline-title {
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        /* Microscope Simulators */
        .simulator-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }
        .simulator-controls { flex: 1; }
        .simulator-view { flex: 1; }
        
        #microscope-view {
            width: 250px;
            height: 250px;
            border: 10px solid #333;
            border-radius: 50%;
            background-color: #fffacd;
            position: relative;
            overflow: hidden;
            margin: 0 auto;
        }
        #slide-object {
            position: absolute;
            font-size: 80px;
            font-weight: bold;
            color: #555;
            transition: top 0.3s, left 0.3s;
            transform: rotate(180deg);
            user-select: none;
        }
        #slide-preview {
            width: 200px;
            height: 80px;
            background-color: rgba(173, 216, 230, 0.5);
            border: 1px solid #add8e6;
            position: relative;
            margin: 10px auto;
        }
        #slide-preview-object {
            position: absolute;
            font-size: 40px;
            font-weight: bold;
            transition: top 0.3s, left 0.3s;
            user-select: none;
        }
        .sim-controls button, .sim-controls .letter-btn {
            margin: 2px; padding: 5px 10px; cursor: pointer; border: 1px solid #ccc;
        }
        
        #magnification-view {
            width: 250px;
            height: 250px;
            border: 10px solid #333;
            border-radius: 50%;
            background-color: #fffacd;
            position: relative;
            overflow: hidden;
            transition: filter 0.5s;
            margin: 0 auto;
        }
        #magnification-content {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.5s;
        }
        .cell {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: var(--accent-color-4);
            border-radius: 50%;
            opacity: 0.7;
            transition: width 0.5s, height 0.5s;
        }
        #magnification-view.high-power {
            filter: brightness(0.7);
        }
        #magnification-view.high-power #magnification-content {
            transform: scale(2.5);
        }
        #magnification-view.high-power .cell {
            width: 25px;
            height: 25px;
        }
        .mag-info span { display: block; }
        .mag-info .active { font-weight: bold; color: var(--highlight-color); }
        
        /* Quiz Section */
        .quiz-question {
            margin-bottom: 2rem;
            border-left: 4px solid var(--accent-color-3);
            padding-left: 1.5rem;
        }
        .quiz-options .option {
            display: block;
            background-color: #f9f9f9;
            border: 1px solid #eee;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .quiz-options .option:hover {
            background-color: #f0f0f0;
        }
        .quiz-options .option.selected {
            border-color: var(--highlight-color);
            background-color: #eaf2f1;
        }
        .quiz-options .option.correct {
            background-color: var(--correct-color);
            color: white;
            border-color: var(--correct-color);
        }
        .quiz-options .option.incorrect {
            background-color: var(--incorrect-color);
            color: white;
            border-color: var(--incorrect-color);
        }
        .quiz-feedback {
            display: none;
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            background-color: #f0f8ff;
        }
        .quiz-feedback.show {
            display: block;
        }
        .quiz-answer-area {
             margin-top: 10px;
        }
         .quiz-answer-area textarea, .quiz-answer-area select, .quiz-answer-area input {
            width: 100%;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
            font-family: inherit;
        }

        /* Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            .card { padding: 1.5rem; }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.75rem; }
            h3 { font-size: 1.25rem; }
            .opener-buttons { flex-direction: column; }
            .flip-card-grid { grid-template-columns: 1fr; }
            .drag-drop-game { grid-template-columns: 1fr; }
            .simulator-container { flex-direction: column; }
            .simulator-view { margin-top: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1><strong class="highlight">第一章 生命的奇蹟與科學家的偵探筆記</strong></h1>

            <h2><strong class="highlight">開場白：嗨！未來的科學家！</strong></h2>
            <p>嘿！你好啊！歡迎來到國中自然的第一堂課。在上課前，我想先問你一個問題：</p>
            <blockquote>想像一下，你眼前有一台最先進的AI機器人，它會走路、會說話、會學習，甚至還需要「充電」才能運作。那麼... <strong class="highlight">它算是「活著的」嗎？</strong></blockquote>
            <div class="opener-buttons">
                <button class="opener-btn" data-choice="yes">算，它是活的！</button>
                <button class="opener-btn" data-choice="no">不算，它只是機器！</button>
            </div>
            <p>這個問題是不是有點讓你頭腦打結？別擔心，這就是我們這堂課要解開的謎題！我們將化身為偵探, 學習如何分辨「生命」與「非生命」，並掌握科學家們用來探索世界的超酷工具——<strong class="highlight">科學方法</strong>和<strong class="highlight">顯微鏡</strong>！準備好了嗎？我們的探險，現在開始！</p>
        </div>

        <div class="card">
            <h2><strong class="highlight">PART 1：到底什麼才算「活著」？—— 1-1 多彩多姿的生命世界</strong></h2>
            
            <h3><strong class="highlight">1.1 生命的四大天王</strong></h3>
            <p>要判斷一個東西是不是生物，科學家們有一套秘密的檢核標準，我稱之為「<strong class="highlight">生命四大天王</strong>」。只要一個個體能展現這四種現象，我們就稱它為「<strong class="highlight">生物</strong>」；反之，就是「<strong class="highlight">非生物</strong>」。</p>
            <p>(💡 <strong>互動設計：請點擊下方的四大天王卡牌，翻開來看看它們的秘密！</strong>)</p>

            <div class="flip-card-grid">
                <div class="flip-card-container" style="--card-color: var(--accent-color-1);">
                    <div class="flip-card-flipper">
                        <div class="flip-card-front" style="background-color: var(--card-color);">
                            <div class="card-icon" id="icon-metabolism"><div class="arrow"></div><div class="arrow"></div></div>
                            <h4>👑 代謝 (Metabolism)</h4>
                        </div>
                        <div class="flip-card-back">
                            <h4 class="card-back-title" style="color: var(--card-color);">就像一座超高效的化學工廠！</h4>
                            <p>生物會從外界吸收物質，在體內進行化學反應來獲得能量或組合成新材料，最後再把廢物排出去。</p>
                            <p><strong>生活例子</strong>：松鼠吃松果，植物進行光合作用。石頭可不會自己吃飯上廁所！</p>
                        </div>
                    </div>
                </div>
                <div class="flip-card-container" style="--card-color: var(--accent-color-2);">
                    <div class="flip-card-flipper">
                        <div class="flip-card-front" style="background-color: var(--card-color);">
                            <div class="card-icon" id="icon-growth"><div></div><div></div><div></div></div>
                            <h4>👑 生長與發育</h4>
                        </div>
                        <div class="flip-card-back">
                            <h4 class="card-back-title" style="color: var(--card-color);">從S號變成XL號的過程！</h4>
                            <p>「生長」是細胞數量變多、體積變大。「發育」是從幼年到成年，結構和功能逐漸成熟的過程。</p>
                            <p><strong>生活例子</strong>：豆子長成豆苗，你的身高抽高了不少！</p>
                        </div>
                    </div>
                </div>
                <div class="flip-card-container" style="--card-color: var(--accent-color-3);">
                    <div class="flip-card-flipper">
                        <div class="flip-card-front" style="background-color: var(--card-color);">
                             <div class="card-icon" id="icon-response">
                                <div class="center"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div>
                             </div>
                            <h4>👑 感應與運動</h4>
                        </div>
                        <div class="flip-card-back">
                            <h4 class="card-back-title" style="color: var(--card-color);">內建的超級雷達系統！</h4>
                            <p>生物能察覺到內外在環境的變化，並做出相對應的反應或動作。</p>
                            <p><strong>生活例子</strong>：含羞草葉子被碰到會合起來；你聽到下課鐘聲會衝出教室。</p>
                        </div>
                    </div>
                </div>
                <div class="flip-card-container" style="--card-color: var(--accent-color-4);">
                    <div class="flip-card-flipper">
                        <div class="flip-card-front" style="background-color: var(--card-color);">
                            <div class="card-icon" id="icon-reproduction"><div></div><div></div></div>
                            <h4>👑 生殖 (Reproduction)</h4>
                        </div>
                        <div class="flip-card-back">
                            <h4 class="card-back-title" style="color: var(--card-color);">生命的終極任務：複製貼上！</h4>
                            <p>生物會透過生殖作用產生和自己相似的下一代，這是生命與非生命最根本的區別之一。</p>
                            <p><strong>生活例子</strong>：母雞下蛋孵小雞。你家的石頭放再久，也不會生出小石頭！</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="interactive-section" id="checkpoint1">
                <p class="interactive-title">互動Checkpoint 1：生命現象配對遊戲</p>
                <p><strong>情境</strong>：森林裡正在舉辦一場熱鬧的派對！請你拖曳下方的事件，把它們配對到正確的「生命四大天王」籃子裡吧！</p>
                <div class="drag-drop-game">
                    <div class="drag-sources">
                        <h4>可拖曳的事件方塊：</h4>
                        <div class="drag-item" draggable="true" data-id="1" data-target="metabolism">一隻毛毛蟲正在啃食葉子</div>
                        <div class="drag-item" draggable="true" data-id="2" data-target="response">向日葵的花盤朝著太陽的方向轉動</div>
                        <div class="drag-item" draggable="true" data-id="3" data-target="reproduction">一隻貓媽媽生下了三隻小貓</div>
                        <div class="drag-item" draggable="true" data-id="4" data-target="growth">你從150公分長高到160公分</div>
                    </div>
                    <div class="drop-targets">
                        <div class="drop-target" data-target="metabolism"><h4 style="color:var(--accent-color-1);">代謝</h4></div>
                        <div class="drop-target" data-target="growth"><h4 style="color:var(--accent-color-2);">生長與發育</h4></div>
                        <div class="drop-target" data-target="response"><h4 style="color:var(--accent-color-3);">感應與運動</h4></div>
                        <div class="drop-target" data-target="reproduction"><h4 style="color:var(--accent-color-4);">生殖</h4></div>
                    </div>
                </div>
            </div>

            <h3><strong class="highlight">1.2 生物圈——地球的生命保護層</strong></h3>
            <p>你知道嗎？地球上所有生物和它們賴以生存的環境，合在一起就叫做「<strong class="highlight">生物圈</strong>」。</p>
            <p>想像一下，地球是一顆大蘋果，那生物圈的範圍大概就只相當於那層<strong class="highlight">薄薄的蘋果皮</strong>！它大約是從<strong class="highlight">海平面垂直往上和往下各約一萬公尺</strong>的範圍。雖然很薄，但從熾熱的溫泉、寒冷的極地到漆黑的深海，都有生命堅韌地存在著！</p>
            <div class="biosphere-container">
                <div class="earth"></div>
                <div class="biosphere-ring"></div>
                <div class="biosphere-info">這就是生物圈！範圍約為海平面上下各一萬公尺，雖然薄，卻充滿生命！</div>
            </div>
            
            <h3><strong class="highlight">1.3 適者生存的超級變變變</strong></h3>
            <p>為了在各種嚴苛的環境中活下來，生物們都練就了一身「偽裝」的本領！</p>
            <ul>
                <li><strong>保護色</strong>：讓自己的體色跟環境融為一體，像是捉迷藏高手！
                    <ul><li><strong>例子</strong>：綠色的樹蛙趴在綠葉上，敵人根本找不到！</li></ul>
                </li>
                <li><strong>擬態</strong>：模仿環境中其他東西的外形或顏色，簡直是天生的演員！
                    <ul><li><strong>例子</strong>：枯葉蝶的翅膀收起來時，跟一片枯葉沒兩樣；尺蠖的幼蟲靜止時，就像一根小樹枝。</li></ul>
                </li>
            </ul>
            <div class="interactive-section">
                <p class="interactive-title">💡 互動設計：高難度的偽裝挑戰</p>
                <div class="camouflage-game">
                    <div>
                        <p><strong>保護色挑戰</strong>：綠葉中藏著一隻樹蛙，點擊找出來！</p>
                        <div class="camouflage-box" id="tree-frog-game"></div>
                    </div>
                    <div>
                        <p><strong>擬態挑戰</strong>：枯枝中藏著一隻尺蠖，你能分辨出來嗎？</p>
                        <div class="camouflage-box" id="stick-bug-game"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2><strong class="highlight">PART 2：像偵探一樣思考——1-2 探究自然的科學方法</strong></h2>
            <p>你是不是常常對生活中的事感到好奇？「為什麼麵包放久了會發霉？」「為什麼冰塊會浮在水上？」恭喜你，你已經具備了成為科學家的第一個特質——<strong class="highlight">好奇心</strong>！而科學家們解答疑惑的過程，就像偵探辦案一樣，有一套嚴謹的流程，這就是「<strong class="highlight">科學方法</strong>」。</p>

            <h3><strong class="highlight">2.1 科學辦案七步驟</strong></h3>
            <p>我們以課本上「吐司發霉」的例子，來走一遍完整的辦案流程吧！(請點擊標題展開)</p>
            <div class="timeline" id="scientific-method-timeline">
                <div class="timeline-item is-active">
                    <div class="timeline-dot"></div>
                    <div class="timeline-title">1. 觀察</div>
                    <div class="timeline-content"><p>你發現「放在桌上的吐司發霉了，但放在冰箱裡的吐司卻沒事。」</p></div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-title">2. 提出問題</div>
                    <div class="timeline-content"><p>根據觀察，你心裡冒出一個問號：「吐司發霉的速度，跟<strong class="highlight">溫度</strong>有關係嗎？」</p></div>
                </div>
                 <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-title">3. 參考文獻資料</div>
                    <div class="timeline-content"><p>你上網查資料或翻書，發現「造成發霉的黴菌是一種生物，而生物的生長會受到溫度影響。」</p></div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-title">4. 形成假說</div>
                    <div class="timeline-content"><p>「假說」就是<strong class="highlight">根據現有資料，對問題提出一個可能、而且可以被驗證的答案</strong>。例如：「<strong class="highlight">我『假設』吐司放在溫度比較低的地方，比較不容易發霉。</strong>」</p></div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-title">5. 設計與進行實驗</div>
                    <div class="timeline-content"><p>這是最關鍵的一步！你要設計一個公平的實驗來證明你的假說。</p></div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-title">6. 分析實驗結果</div>
                    <div class="timeline-content"><p>記錄實驗數據（例如每天吐司上黴菌的面積），並製作成圖表，看看有沒有規律。</p></div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-title">7. 提出結論</div>
                    <div class="timeline-content"><p>如果實驗結果支持你的假說（冰箱的吐司真的沒發霉或發霉很慢），你就可以下結論：「<strong class="highlight">溫度越低，吐司越不容易發霉。</strong>」如果不支持，那也沒關係，代表你的假說錯了，需要重新修正再實驗一次！</p></div>
                </div>
            </div>
            
            <h3><strong class="highlight">2.2 實驗設計的核心：變因！</strong></h3>
            <p>一個好的實驗，最重要的就是要「<strong class="highlight">公平</strong>」！為了達到公平，我們必須了解三種「<strong class="highlight">變因</strong>」。</p>
            <ul>
                <li><strong>操縱變因（操作變因）</strong>：整個實驗中，<strong class="highlight">唯一</strong>被我們刻意改變的因素。在吐司實驗裡，就是「<strong class="highlight">溫度</strong>」。</li>
                <li><strong>應變變因</strong>：因為操縱變因而<strong class="highlight">產生變化</strong>、我們要觀察記錄的結果。在吐司實驗裡，就是「<strong class="highlight">吐司發霉的程度</strong>」。</li>
                <li><strong>控制變因</strong>：為了保持公平，所有<strong class="highlight">必須維持不變</strong>的因素。在吐司實驗裡，包含：吐司的大小、品牌、溼度、有沒有用夾鏈袋密封...等等。</li>
            </ul>
            <blockquote><strong class="highlight">超級比喻</strong>：想像一場賽跑。為了知道誰跑得最快，所有選手都必須在<strong class="highlight">同一個跑道</strong>、<strong class="highlight">同一個時間點</strong>出發、<strong class="highlight">天氣狀況也一樣</strong>（這些都是<strong class="highlight">控制變因</strong>）。選手本身的不同（例如A選手和B選手）就是<strong class="highlight">操縱變因</strong>。而他們跑完所需的時間，就是<strong class="highlight">應變變因</strong>。</blockquote>
            
            <h3><strong class="highlight">2.3 實驗組 vs. 對照組</strong></h3>
            <p>在實驗中，我們通常會分組：</p>
            <ul>
                <li><strong>對照組</strong>：維持在<strong class="highlight">一般、正常狀態</strong>下的那一組，用來做比較基準。在吐司實驗裡，就是「<strong class="highlight">放在室溫下</strong>」的那片吐司。</li>
                <li><strong>實驗組</strong>：對「<strong class="highlight">操縱變因</strong>」進行改變的那一組。在吐司實驗裡，就是「<strong class="highlight">放在冰箱裡</strong>」的那片吐司。</li>
            </ul>

            <div class="interactive-section" id="checkpoint2">
                <p class="interactive-title">互動Checkpoint 2：變因拖拖樂</p>
                <p><strong>情境</strong>：小明想知道「在水裡加鹽巴，是不是能讓雞蛋浮起來？」他準備了兩杯一樣多的清水，其中一杯加入了鹽巴攪拌，然後將兩顆一樣大的雞蛋分別放入。</p>
                <p><strong>任務</strong>：請將下列名詞拖曳到正確的格子中。</p>
                <div class="drag-drop-game">
                    <div class="drag-sources">
                        <h4>可拖曳的名詞：</h4>
                        <div class="drag-item" draggable="true" data-target="control">水的溫度</div>
                        <div class="drag-item" draggable="true" data-target="control">杯子的大小</div>
                        <div class="drag-item" draggable="true" data-target="manipulated">有沒有加鹽巴</div>
                        <div class="drag-item" draggable="true" data-target="responding">雞蛋是否浮起</div>
                        <div class="drag-item" draggable="true" data-target="experimental">加鹽巴的那杯水</div>
                        <div class="drag-item" draggable="true" data-target="control_group">純水的那杯水</div>
                    </div>
                    <div class="drop-targets">
                        <div class="drop-target" data-target="manipulated"><h4>操縱變因：</h4></div>
                        <div class="drop-target" data-target="responding"><h4>應變變因：</h4></div>
                        <div class="drop-target" data-target="control"><h4>控制變因：</h4></div>
                        <div class="drop-target" data-target="experimental"><h4>實驗組：</h4></div>
                        <div class="drop-target" data-target="control_group"><h4>對照組：</h4></div>
                    </div>
                </div>
            </div>

        </div>

        <div class="card">
            <h2><strong class="highlight">PART 3：踏入科學聖殿——1-3 實驗室探險</strong></h2>
            <h3><strong class="highlight">3.1 安全第一！實驗室生存守則</strong></h3>
            <ul>
                <li><strong class="highlight">禁止飲食嬉戲</strong>：你不會想把化學藥品當飲料喝下去的！</li>
                <li><strong class="highlight">聽從老師指示</strong>：不要自己亂動藥品或器材。</li>
                <li><strong class="highlight">長髮要綁起來</strong>：否則一不小心，你的頭髮可能會在酒精燈上「烤焦」！</li>
                <li><strong class="highlight">發生意外要冷靜</strong>：立刻報告老師！例如酒精燈打翻，要用<strong class="highlight">溼抹布</strong>蓋熄，千萬不能用嘴吹！</li>
            </ul>

            <h3><strong class="highlight">3.2 神兵利器——顯微鏡大解密</strong></h3>
            <p>想看到肉眼看不到的微小世界嗎？我們需要兩大神器：<strong class="highlight">複式顯微鏡</strong>和<strong class="highlight">解剖顯微鏡</strong>。</p>
            <table style="width:100%; border-collapse: collapse; text-align: center;">
                <thead>
                    <tr style="background-color: var(--accent-color-3);">
                        <th style="padding: 10px; border: 1px solid #ccc;">神器比一比</th>
                        <th style="padding: 10px; border: 1px solid #ccc;">複式顯微鏡</th>
                        <th style="padding: 10px; border: 1px solid #ccc;">解剖顯微鏡</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td style="padding: 10px; border: 1px solid #ccc;"><strong>觀察對象</strong></td><td style="padding: 10px; border: 1px solid #ccc;">需要切成<strong>薄片</strong>、能<strong>透光</strong>的東西</td><td style="padding: 10px; border: 1px solid #ccc;"><strong>立體</strong>、<strong>不透光</strong>的物體表面</td></tr>
                    <tr><td style="padding: 10px; border: 1px solid #ccc;"><strong>影像</strong></td><td style="padding: 10px; border: 1px solid #ccc;"><strong>平面</strong>影像</td><td style="padding: 10px; border: 1px solid #ccc;"><strong>立體</strong>影像</td></tr>
                    <tr><td style="padding: 10px; border: 1px solid #ccc;"><strong>放大倍率</strong></td><td style="padding: 10px; border: 1px solid #ccc;"><strong>較高</strong> (通常40~1000倍)</td><td style="padding: 10px; border: 1px solid #ccc;"><strong>較低</strong> (通常10~60倍)</td></tr>
                    <tr><td style="padding: 10px; border: 1px solid #ccc;"><strong>影像方向</strong></td><td style="padding: 10px; border: 1px solid #ccc;"><strong>上下顛倒、左右相反</strong></td><td style="padding: 10px; border: 1px solid #ccc;"><strong>和實物相同</strong></td></tr>
                    <tr><td style="padding: 10px; border: 1px solid #ccc;"><strong>生活應用</strong></td><td style="padding: 10px; border: 1px solid #ccc;">觀察細胞、細菌</td><td style="padding: 10px; border: 1px solid #ccc;">觀察昆蟲翅膀、花朵構造</td></tr>
                </tbody>
            </table>
            
            <h3>⭐ 考點大魔王：複式顯微鏡的影像 ⭐</h3>
            <p>這是段考必考的大魔王！記住口訣：「<strong class="highlight">上下顛倒，左右相反</strong>」。</p>
            <ul>
                <li><strong>什麼意思？</strong> 你在顯微鏡視野中看到的影像，跟玻片上的實物是完全相反的。</li>
                <li><strong>舉例</strong>：你在玻片上放了一個字母「<strong>p</strong>」，在視野中會看到「<strong>d</strong>」。</li>
                <li><strong>操作</strong>：如果你想把視野中偏<strong class="highlight">左上方</strong>的物體移到<strong class="highlight">正中央</strong>，你就必須把玻片往<strong class="highlight">左上方</strong>移動！(想去哪，就往哪推！)</li>
            </ul>
             <div class="interactive-section">
                <p class="interactive-title">虛擬顯微鏡視野模擬器</p>
                <div class="simulator-container">
                    <div class="simulator-controls">
                        <p><strong>1. 選擇玻片上的字母:</strong></p>
                        <button class="letter-btn" data-letter="p">p</button>
                        <button class="letter-btn" data-letter="b">b</button>
                        <button class="letter-btn" data-letter="q">q</button>
                        <button class="letter-btn" data-letter="d">d</button>
                        <div id="slide-preview">
                            <div id="slide-preview-object">p</div>
                        </div>
                        <p><strong>2. 移動玻片:</strong></p>
                        <button class="sim-controls" id="move-up-left">↖</button>
                        <button class="sim-controls" id="move-up">↑</button>
                        <button class="sim-controls" id="move-up-right">↗</button><br>
                        <button class="sim-controls" id="move-left">←</button>
                        <button class="sim-controls" id="move-center">中央</button>
                        <button class="sim-controls" id="move-right">→</button><br>
                        <button class="sim-controls" id="move-down-left">↙</button>
                        <button class="sim-controls" id="move-down">↓</button>
                        <button class="sim-controls" id="move-down-right">↘</button>
                    </div>
                    <div class="simulator-view">
                        <p><strong>視野中所見:</strong></p>
                        <div id="microscope-view">
                            <div id="slide-object">p</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <h3>放大倍率怎麼算？</h3>
            <p>超簡單的公式： \[\text{總放大倍率} = \text{物鏡放大倍率} \times \text{目鏡放大倍率}\] 例如：物鏡是40倍，目鏡是10倍，總放大倍率就是 \(40 \times 10 = 400\)倍！</p>

            <h3>高倍鏡 vs. 低倍鏡</h3>
            <p>從低倍鏡換到高倍鏡時，視野會產生變化：</p>
            <ul>
                <li><strong>範圍</strong>：變<strong class="highlight">小</strong> (看到的範圍變窄了)</li>
                <li><strong>亮度</strong>：變<strong class="highlight">暗</strong> (進光量變少了，需要調大光圈)</li>
                <li><strong>細胞大小</strong>：變<strong class="highlight">大</strong></li>
                <li><strong>細胞數量</strong>：變<strong class="highlight">少</strong></li>
            </ul>
            <div class="interactive-section">
                <p class="interactive-title">視野切換模擬器</p>
                <div class="simulator-container">
                    <div class="simulator-controls">
                        <button class="check-btn" id="toggle-magnification">切換為高倍鏡</button>
                        <div class="mag-info" id="mag-info-text">
                            <span id="info-range" class="active"><strong>範圍</strong>：大</span>
                            <span id="info-brightness" class="active"><strong>亮度</strong>：亮</span>
                            <span id="info-size" class="active"><strong>細胞大小</strong>：小</span>
                            <span id="info-count" class="active"><strong>細胞數量</strong>：多</span>
                        </div>
                    </div>
                    <div class="simulator-view">
                        <div id="magnification-view">
                            <div id="magnification-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2><strong class="highlight">本章重點總整理</strong></h2>
            <ul>
                <li><strong class="highlight">生物四大特徵</strong>：代謝、生長與發育、感應與運動、生殖。</li>
                <li><strong class="highlight">生物圈</strong>：海平面上下各一萬公尺的範圍。</li>
                <li><strong class="highlight">科學方法七步驟</strong>：觀察 → 提問 → 查資料 → 假說 → 實驗 → 分析 → 結論。</li>
                <li><strong class="highlight">實驗三變因</strong>：操縱變因（唯一改變）、應變變因（觀察結果）、控制變因（保持不變）。</li>
                <li><strong class="highlight">複式顯微鏡</strong>：影像「上下顛倒、左右相反」，倍率高，看薄片。</li>
                <li><strong class="highlight">解剖顯微鏡</strong>：影像「和實物相同」，倍率低，看立體。</li>
            </ul>
        </div>
        
        <div class="card">
            <h2><strong class="highlight">小試身手：偵探挑戰賽</strong></h2>
            
            <div class="quiz-question" id="quiz1">
                <p><strong>第1題 (基礎題)</strong></p>
                <p>下列哪一個情境，最能明確地表現出生物的「<strong class="highlight">感應</strong>」現象？請點選你認為最正確的選項。</p>
                <div class="quiz-options">
                    <div class="option" data-answer="A">A. 一隻小狗發出均勻的呼吸聲，安詳地睡著</div>
                    <div class="option" data-answer="B">B. 觸碰一株植物的葉片後，它的葉子迅速閉合了起來</div>
                    <div class="option" data-answer="C">C. 一陣風吹過，一顆成熟的蘋果從樹枝上落下</div>
                    <div class="option" data-answer="D">D. 一群鮭魚奮力向上游，準備回到出生地產卵</div>
                </div>
                <div class="quiz-feedback"></div>
            </div>
            
            <div class="quiz-question" id="quiz2">
                <p><strong>第2題 (進階題)</strong></p>
                <p>小華想研究「<strong class="highlight">不同顏色的光線是否會影響綠豆的發芽率</strong>」。他準備了三組培養皿，分別用紅光、藍光和白光（正常光線）照射，其他條件都相同。請將下列項目拖曳到對應的變因或組別中。</p>
                <div class="drag-drop-game">
                    <div class="drag-sources">
                        <h4>項目：</h4>
                        <div class="drag-item" draggable="true" data-target="manipulated">光線的顏色</div>
                        <div class="drag-item" draggable="true" data-target="responding">綠豆的發芽率</div>
                        <div class="drag-item" draggable="true" data-target="control">培養皿的溫度</div>
                        <div class="drag-item" draggable="true" data-target="control">每天澆的水量</div>
                        <div class="drag-item" draggable="true" data-target="control_group">用白光照射的那一組</div>
                        <div class="drag-item" draggable="true" data-target="experimental">用紅光照射的那一組</div>
                    </div>
                    <div class="drop-targets">
                        <div class="drop-target" data-target="manipulated"><h4>操縱變因：</h4></div>
                        <div class="drop-target" data-target="responding"><h4>應變變因：</h4></div>
                        <div class="drop-target" data-target="control"><h4>控制變因：</h4></div>
                        <div class="drop-target" data-target="control_group"><h4>對照組：</h4></div>
                        <div class="drop-target" data-target="experimental"><h4>實驗組：</h4></div>
                    </div>
                </div>
                <button class="check-btn quiz-check-btn" style="margin-top: 15px;">檢查答案</button>
                <div class="quiz-feedback"></div>
            </div>

            <div class="quiz-question" id="quiz3">
                <p><strong>第3題 (素養題)</strong></p>
                <p>參考課本 p.13 的漫畫情境：小華的妹妹把一顆「生石花」種在土裡，小華嘲笑她把石頭種在土裡。但經過三個月，這顆「石頭」不但變大了，還開出了花朵。根據漫畫中的線索，你認為生石花至少展現了哪兩種「生命現象」？</p>
                <div class="quiz-answer-area">
                    <p>生石花展現了 
                        <select id="q3_select1">
                            <option value="">請選擇</option>
                            <option value="metabolism">代謝</option>
                            <option value="growth">生長與發育</option>
                            <option value="response">感應</option>
                            <option value="reproduction">生殖</option>
                        </select>
                     現象，因為漫畫中提到它 <input type="text" id="q3_input1" placeholder="填寫理由">。
                    </p>
                    <p>它同時也展現了 
                        <select id="q3_select2">
                            <option value="">請選擇</option>
                            <option value="metabolism">代謝</option>
                            <option value="growth">生長與發育</option>
                            <option value="response">感應</option>
                            <option value="reproduction">生殖</option>
                        </select>
                     現象，因為植物開花是為了 <input type="text" id="q3_input2" placeholder="填寫理由">。
                    </p>
                    <button class="check-btn quiz-check-btn">核對答案</button>
                    <div class="quiz-feedback"></div>
                </div>
            </div>
            
            <div class="quiz-question" id="quiz4">
                <p><strong>第4題 (素養題)</strong></p>
                <p>小明正在使用複式顯微鏡觀察水中的草履蟲，好不容易在40倍（4X物鏡）的視野下找到了目標，但他發現草履蟲位於視野的<strong class="highlight">右下方</strong>。他想要將草履蟲移動到視野正中央，然後換成100倍（10X物鏡）觀察。</p>
                <div class="quiz-answer-area">
                    <p>1. 他應該將玻片標本往哪個方向移動？ <input type="text" id="q4_input1" placeholder="例如：右下方"></p>
                    <p>2. 換成100倍觀察後，他應該轉動哪種調節輪來對焦？為什麼？<br>
                    <textarea id="q4_input2" rows="3" placeholder="調節輪名稱與原因..."></textarea></p>
                    <button class="check-btn quiz-check-btn">核對答案</button>
                    <div class="quiz-feedback"></div>
                </div>
            </div>

            <div class="quiz-question" id="quiz5">
                <p><strong>第5題 (素養題)</strong></p>
                <p><strong>閱讀以下新聞短文並回答問題：</strong><br>
                <em>【快訊】科學家在南極冰層下三千公尺的湖泊中，發現一種前所未見的微生物「冰晶蟲」。研究發現，這種單細胞生物在攝氏零下的環境中，能分解水中的微量甲烷來獲得活動所需能量，並釋放出二氧化碳。當科學家用強光照射它時，它會迅速游向黑暗處。目前尚未觀察到它有分裂或產生後代的行為。</em></p>
                <div class="quiz-answer-area">
                    <p>根據這段描述，請判斷「冰晶蟲」目前符合了哪些生物的生命現象？又有哪些現象是尚待觀察的？</p>
                    <textarea id="q5_input" rows="5" placeholder="請在此作答..."></textarea>
                    <button class="check-btn quiz-check-btn">核對答案</button>
                    <div class="quiz-feedback"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Template -->
    <div id="openerModal" class="modal">
        <div class="modal-content">
            <p>這是一個沒有標準答案的好問題！你的思考正是科學探究的起點。接下來，讓我們一起學習科學家如何定義「生命」，課程結束後再來回答這個問題，看看你的想法是否會改變！</p>
            <button class="modal-close">太酷了！</button>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- Opener Modal ---
        const modal = document.getElementById('openerModal');
        const openerBtns = document.querySelectorAll('.opener-btn');
        const closeModalBtn = modal.querySelector('.modal-close');

        openerBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                modal.style.display = 'flex';
            });
        });

        closeModalBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });
        
        window.addEventListener('click', (event) => {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        });

        // --- Flip Cards ---
        const flipCards = document.querySelectorAll('.flip-card-container');
        flipCards.forEach(card => {
            card.addEventListener('click', () => {
                card.classList.toggle('is-flipped');
            });
        });
        
        // --- Drag and Drop Games ---
        function initializeDragDrop(containerSelector) {
            const container = document.querySelector(containerSelector);
            if (!container) return;
            
            const draggables = container.querySelectorAll('.drag-item');
            const dropTargets = container.querySelectorAll('.drop-target');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    draggable.classList.add('dragging');
                });
                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('dragging');
                });
            });

            dropTargets.forEach(target => {
                target.addEventListener('dragover', e => {
                    e.preventDefault();
                    target.classList.add('drag-over');
                });
                target.addEventListener('dragleave', () => {
                    target.classList.remove('drag-over');
                });
                target.addEventListener('drop', e => {
                    e.preventDefault();
                    target.classList.remove('drag-over');
                    const draggingItem = document.querySelector(`${containerSelector} .dragging`);
                    if (draggingItem) {
                        if(draggingItem.dataset.target === target.dataset.target) {
                            target.appendChild(draggingItem);
                        } else {
                            draggingItem.classList.add('shake');
                            setTimeout(() => draggingItem.classList.remove('shake'), 500);
                        }
                    }
                });
            });
        }
        
        initializeDragDrop('#checkpoint1');
        initializeDragDrop('#checkpoint2');
        initializeDragDrop('#quiz2');

        // --- Camouflage Game ---
        const frogGame = document.getElementById('tree-frog-game');
        for (let i = 0; i < 100; i++) {
            const cell = document.createElement('div');
            cell.style.backgroundColor = '#8fb98f';
            frogGame.appendChild(cell);
        }
        const frog = frogGame.children[Math.floor(Math.random() * 100)];
        frog.style.backgroundColor = '#8fbc8f';
        frog.dataset.hidden = 'true';
        frogGame.addEventListener('click', e => {
            if (e.target.dataset.hidden) {
                e.target.style.border = '2px solid red';
                alert('找到了！這就是保護色！');
            }
        });

        const bugGame = document.getElementById('stick-bug-game');
        for (let i = 0; i < 10; i++) {
            const stick = document.createElement('div');
            stick.classList.add('stick');
            stick.style.width = `${Math.random() * 40 + 50}px`;
            stick.style.top = `${Math.random() * 180}px`;
            stick.style.left = `${Math.random() * 100}px`;
            stick.style.transform = `rotate(${Math.random() * 180}deg)`;
            bugGame.appendChild(stick);
        }
        const bug = bugGame.children[Math.floor(Math.random() * 10)];
        bug.style.backgroundColor = '#a0522d';
        bug.dataset.hidden = 'true';
        bugGame.addEventListener('click', e => {
            if (e.target.dataset.hidden) {
                e.target.style.border = '2px solid red';
                 alert('找到了！這就是擬態！');
            }
        });
        
        // --- Scientific Method Timeline ---
        const timelineItems = document.querySelectorAll('#scientific-method-timeline .timeline-item');
        timelineItems.forEach((item, index) => {
            const title = item.querySelector('.timeline-title');
            const content = item.querySelector('.timeline-content');
            if (index === 0) { // Initially open first item
                content.style.maxHeight = content.scrollHeight + "px";
                content.style.padding = "1rem";
            }
            title.addEventListener('click', () => {
                const isActive = item.classList.contains('is-active');
                timelineItems.forEach(i => {
                    i.classList.remove('is-active');
                    i.querySelector('.timeline-content').style.maxHeight = null;
                    i.querySelector('.timeline-content').style.padding = "0 1rem";
                });
                if (!isActive) {
                    item.classList.add('is-active');
                    content.style.maxHeight = content.scrollHeight + "px";
                    content.style.padding = "1rem";
                }
            });
        });

        // --- Microscope Simulators ---
        // Image inversion simulator
        const slideObject = document.getElementById('slide-object');
        const previewObject = document.getElementById('slide-preview-object');
        const view = document.getElementById('microscope-view');
        
        let currentPos = { x: 50, y: 50 };
        
        function updateObjectPosition() {
            slideObject.style.top = `${currentPos.y}%`;
            slideObject.style.left = `${currentPos.x}%`;
            previewObject.style.top = `${currentPos.y}%`;
            previewObject.style.left = `${currentPos.x}%`;
        }

        document.querySelectorAll('.letter-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                slideObject.textContent = e.target.dataset.letter;
                previewObject.textContent = e.target.dataset.letter;
            });
        });

        document.getElementById('move-up-left').addEventListener('click', () => { currentPos.y -= 10; currentPos.x -= 10; updateObjectPosition(); });
        document.getElementById('move-up').addEventListener('click', () => { currentPos.y -= 10; updateObjectPosition(); });
        document.getElementById('move-up-right').addEventListener('click', () => { currentPos.y -= 10; currentPos.x += 10; updateObjectPosition(); });
        document.getElementById('move-left').addEventListener('click', () => { currentPos.x -= 10; updateObjectPosition(); });
        document.getElementById('move-center').addEventListener('click', () => { currentPos.x = 50; currentPos.y = 50; updateObjectPosition(); });
        document.getElementById('move-right').addEventListener('click', () => { currentPos.x += 10; updateObjectPosition(); });
        document.getElementById('move-down-left').addEventListener('click', () => { currentPos.y += 10; currentPos.x -= 10; updateObjectPosition(); });
        document.getElementById('move-down').addEventListener('click', () => { currentPos.y += 10; updateObjectPosition(); });
        document.getElementById('move-down-right').addEventListener('click', () => { currentPos.y += 10; currentPos.x += 10; updateObjectPosition(); });

        updateObjectPosition();

        // Magnification simulator
        const magView = document.getElementById('magnification-view');
        const magContent = document.getElementById('magnification-content');
        const toggleMagBtn = document.getElementById('toggle-magnification');
        const magInfoText = document.getElementById('mag-info-text').children;

        for (let i = 0; i < 10; i++) {
            const cell = document.createElement('div');
            cell.classList.add('cell');
            cell.style.top = `${Math.random() * 85 + 5}%`;
            cell.style.left = `${Math.random() * 85 + 5}%`;
            magContent.appendChild(cell);
        }

        toggleMagBtn.addEventListener('click', () => {
            const isHighPower = magView.classList.toggle('high-power');
            if (isHighPower) {
                toggleMagBtn.textContent = '切換為低倍鏡';
                magInfoText['info-range'].innerHTML = '<strong>範圍</strong>：<span class="highlight">小</span>';
                magInfoText['info-brightness'].innerHTML = '<strong>亮度</strong>：<span class="highlight">暗</span>';
                magInfoText['info-size'].innerHTML = '<strong>細胞大小</strong>：<span class="highlight">大</span>';
                magInfoText['info-count'].innerHTML = '<strong>細胞數量</strong>：<span class="highlight">少</span>';
            } else {
                toggleMagBtn.textContent = '切換為高倍鏡';
                magInfoText['info-range'].innerHTML = '<strong>範圍</strong>：<span class="highlight">大</span>';
                magInfoText['info-brightness'].innerHTML = '<strong>亮度</strong>：<span class="highlight">亮</span>';
                magInfoText['info-size'].innerHTML = '<strong>細胞大小</strong>：<span class="highlight">小</span>';
                magInfoText['info-count'].innerHTML = '<strong>細胞數量</strong>：<span class="highlight">多</span>';
            }
        });
        
        // --- Quiz Logic ---
        // Quiz 1
        const quiz1 = document.getElementById('quiz1');
        quiz1.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', () => {
                quiz1.querySelectorAll('.option').forEach(o => o.classList.remove('selected', 'correct', 'incorrect'));
                option.classList.add('selected');
                const feedbackEl = quiz1.querySelector('.quiz-feedback');
                if (option.dataset.answer === 'B') {
                    option.classList.add('correct');
                    feedbackEl.innerHTML = '<strong>答對了！</strong>觸碰是刺激，閉合是反應。D選項主要是為了「生殖」。';
                } else {
                    option.classList.add('incorrect');
                    feedbackEl.innerHTML = '<strong>再想一想！</strong>「感應」是指對外界的「刺激」做出「反應」喔！睡覺和掉落不是刺激。逆流而上是為了「生殖」這個終極任務！';
                }
                feedbackEl.classList.add('show');
            });
        });
        
        // Quiz 2
        const quiz2Btn = document.querySelector('#quiz2 .quiz-check-btn');
        quiz2Btn.addEventListener('click', () => {
            const targets = document.querySelectorAll('#quiz2 .drop-target');
            let allCorrect = true;
            targets.forEach(target => {
                if (target.children.length === 0) allCorrect = false;
                for(let item of target.children) {
                    if (item.classList.contains('drag-item') && item.dataset.target !== target.dataset.target) {
                        allCorrect = false;
                    }
                }
            });
            const feedbackEl = document.querySelector('#quiz2 .quiz-feedback');
            feedbackEl.innerHTML = allCorrect ? '<strong>完全正確！你真是個變因大師！</strong>' : '<strong>哦哦，有些項目放錯了，再檢查一下吧！</strong>';
            feedbackEl.classList.add('show');
        });

        // Quiz 3
        const quiz3Btn = document.querySelector('#quiz3 .quiz-check-btn');
        quiz3Btn.addEventListener('click', () => {
            const feedbackEl = document.querySelector('#quiz3 .quiz-feedback');
            const select1 = document.getElementById('q3_select1').value === 'growth';
            const select2 = document.getElementById('q3_select2').value === 'reproduction';
            if (select1 && select2) {
                feedbackEl.innerHTML = '<strong>判斷正確！</strong><br>1. <strong class="highlight">生長與發育</strong>：因為漫畫中提到生石花「慢慢長大」，代表它的體積變大了。<br>2. <strong class="highlight">生殖</strong>：因為植物「開花」的目的通常是為了結果、產生種子，這是一種繁衍下一代的生殖行為。';
            } else {
                feedbackEl.innerHTML = '<strong>判斷不完全正確喔！</strong>提示：漫畫中提到了「慢慢長大」和「開花了」，這分別對應到生命四大天王中的哪兩位呢？';
            }
            feedbackEl.classList.add('show');
        });
        
        // Quiz 4
        const quiz4Btn = document.querySelector('#quiz4 .quiz-check-btn');
        quiz4Btn.addEventListener('click', () => {
             const feedbackEl = document.querySelector('#quiz4 .quiz-feedback');
             feedbackEl.innerHTML = `<strong>參考答案：</strong><br>
                1. 他應該將玻片往<strong class="highlight">右下方</strong>移動。因為複式顯微鏡成像是上下顛倒、左右相反的，所以物體在視野中的移動方向會和玻片的移動方向一致。<br>
                2. 他應該轉動「<strong class="highlight">細調節輪</strong>」。因為換上高倍鏡後，物鏡距離玻片非常近，如果使用粗調節輪，可能會因為移動幅度過大而壓破玻片、損傷鏡頭。`;
             feedbackEl.classList.add('show');
        });

        // Quiz 5
        const quiz5Btn = document.querySelector('#quiz5 .quiz-check-btn');
        quiz5Btn.addEventListener('click', () => {
             const feedbackEl = document.querySelector('#quiz5 .quiz-feedback');
             feedbackEl.innerHTML = `<strong>參考答案：</strong><br>
                <ul>
                <li><strong class="highlight">符合的生命現象</strong>：
                    <ol>
                        <li><strong>代謝</strong>：它能分解甲烷獲得能量，並釋放二氧化碳，這就是標準的物質轉換與能量獲取的過程。</li>
                        <li><strong>感應與運動</strong>：它會因「強光照射」（刺激）而「游向黑暗處」（反應與運動）。</li>
                    </ol>
                </li>
                <li><strong class="highlight">尚待觀察的生命現象</strong>：
                    <ol>
                        <li><strong>生長與發育</strong>：文章中沒有提到冰晶蟲的體積有變化或成熟過程。</li>
                        <li><strong>生殖</strong>：文章中明確提到「尚未觀察到它有分裂或產生後代的行為」。</li>
                    </ol>
                </li>
                </ul>
                <p>因此，雖然它展現了部分生命現象，但科學家還需要更多證據才能完整地將其歸類為生物。</p>`;
             feedbackEl.classList.add('show');
        });

    });
    </script>
</body>
</html>
